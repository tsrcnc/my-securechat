(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},879:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(5155),a=t(2115),l=t(63);function n(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center font-sans",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-brand-600"})}),children:(0,r.jsx)(d,{})})}function d(){let e=(0,l.useSearchParams)().get("domain"),[s,t]=(0,a.useState)(null),[n,d]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0),[c,x]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),[b,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e&&(f(),g())},[e]),(0,a.useEffect)(()=>{let e;return b&&(null==s?void 0:s.verificationStatus)==="PENDING"&&(e=setInterval(f,3e4)),()=>clearInterval(e)},[b,null==s?void 0:s.verificationStatus]);let f=async()=>{try{let s=await fetch("".concat("http://localhost:5000","/api/domains/").concat(e));if(s.ok){let e=await s.json();t(e),"VERIFIED"===e.verificationStatus&&u(!1)}}catch(e){console.error("Failed to fetch domain info",e)}finally{o(!1)}},g=async()=>{try{let s=await fetch("".concat("http://localhost:5000","/api/domains/").concat(e,"/instructions"));if(s.ok){let e=await s.json();d(e)}}catch(e){console.error("Failed to fetch instructions",e)}},p=async()=>{x(!0),m(null);try{let s=await fetch("".concat("http://localhost:5000","/api/domains/").concat(e,"/verify"),{method:"POST"}),t=await s.json();m({success:t.success,message:t.message+(t.details?": ".concat(t.details):"")}),t.success&&f()}catch(e){m({success:!1,message:"Network error occurred during verification"})}finally{x(!1)}},j=e=>{navigator.clipboard.writeText(e)};return e?i?(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center font-sans",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-brand-600"})}):(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:[(0,r.jsx)("span",{className:"text-brand-700",children:"Step 2 of 3"}),(0,r.jsx)("span",{children:"Verify Ownership"})]}),(0,r.jsx)("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-brand-600 w-2/3 rounded-full"})})]}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100 p-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-heading text-3xl font-bold text-slate-900 mb-2 tracking-tight",children:e}),(0,r.jsxs)("p",{className:"text-slate-500 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),null==s?void 0:s.ownerEmail]})]}),(0,r.jsx)("div",{className:"px-6 py-2 rounded-full text-sm font-bold tracking-wide uppercase border ".concat((null==s?void 0:s.verificationStatus)==="VERIFIED"?"bg-green-50 text-green-700 border-green-200":"bg-yellow-50 text-yellow-700 border-yellow-200"),children:null==s?void 0:s.verificationStatus})]})}),(null==s?void 0:s.verificationStatus)==="PENDING"&&n&&(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-slate-50/50 px-6 py-4 border-b border-slate-100 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-brand-100 text-brand-700 rounded-lg flex items-center justify-center font-bold",children:"1"}),(0,r.jsx)("h2",{className:"font-heading text-lg font-bold text-slate-900",children:"Copy DNS Records"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6 flex-1",children:[(0,r.jsxs)("p",{className:"text-sm text-slate-500",children:["Add this ",(0,r.jsx)("strong",{children:"TXT Record"})," to your domain's DNS settings."]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Host / Name"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("code",{className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-mono text-brand-700 break-all",children:n.record.name}),(0,r.jsx)("button",{onClick:()=>j(n.record.name),className:"bg-white border border-slate-200 text-slate-600 px-4 rounded-xl hover:bg-slate-50 hover:text-brand-700 hover:border-brand-200 font-medium transition-all shadow-sm",children:"Copy"})]}),(0,r.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Note: Some providers only require the part before the domain name."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Value / Content"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("code",{className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-mono text-brand-700 break-all",children:n.record.value}),(0,r.jsx)("button",{onClick:()=>j(n.record.value),className:"bg-white border border-slate-200 text-slate-600 px-4 rounded-xl hover:bg-slate-50 hover:text-brand-700 hover:border-brand-200 font-medium transition-all shadow-sm",children:"Copy"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Type"}),(0,r.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3 text-sm font-mono font-bold text-slate-900 text-center",children:"TXT"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"TTL"}),(0,r.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3 text-sm font-mono text-slate-500 text-center",children:"Auto / 3600"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-8 flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden flex-1",children:[(0,r.jsxs)("div",{className:"bg-slate-50/50 px-6 py-4 border-b border-slate-100 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-brand-100 text-brand-700 rounded-lg flex items-center justify-center font-bold",children:"2"}),(0,r.jsx)("h2",{className:"font-heading text-lg font-bold text-slate-900",children:"Verify Ownership"})]}),(0,r.jsxs)("div",{className:"p-6 flex flex-col h-full justify-center",children:[(0,r.jsx)("p",{className:"text-slate-500 mb-8 text-center",children:"After adding the record, wait a few minutes for DNS propagation (it can take up to 24 hours in rare cases)."}),(0,r.jsx)("button",{onClick:p,disabled:c,className:"w-full py-4 rounded-xl font-bold text-lg shadow-xl shadow-brand-700/20 transition-all transform hover:-translate-y-1 ".concat(c?"bg-slate-100 text-slate-400 cursor-not-allowed":"bg-brand-700 text-white hover:bg-brand-800"),children:c?"Verifying...":"Verify Domain Now ✨"}),h&&(0,r.jsxs)("div",{className:"mt-6 p-4 rounded-xl text-sm border ".concat(h.success?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:[(0,r.jsx)("p",{className:"font-bold mb-1",children:h.success?"Success!":"Verification Failed"}),(0,r.jsx)("p",{children:h.message})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-slate-100 shadow-sm",children:[(0,r.jsxs)("h3",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"ℹ️"})," Need Help?"]}),(0,r.jsxs)("ul",{className:"text-sm text-slate-500 space-y-2 list-disc list-inside",children:[(0,r.jsxs)("li",{children:["Ensure you selected ",(0,r.jsx)("strong",{children:"TXT"})," as record type"]}),(0,r.jsxs)("li",{children:["Check if your provider needs ",(0,r.jsx)("strong",{children:"@"})," as host"]}),(0,r.jsx)("li",{children:"Wait 5-10 minutes for changes to apply"})]})]})]})]}),(null==s?void 0:s.verificationStatus)==="VERIFIED"&&(0,r.jsxs)("div",{className:"bg-white border border-green-100 rounded-2xl p-12 text-center shadow-xl shadow-green-900/5",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-green-50 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6 text-5xl border border-green-100",children:"✓"}),(0,r.jsx)("h2",{className:"font-heading text-3xl font-bold text-slate-900 mb-4",children:"Domain Verified!"}),(0,r.jsxs)("p",{className:"text-slate-500 text-lg mb-8",children:["You can now register user accounts with ",(0,r.jsxs)("strong",{children:["@",e]})," emails."]}),(0,r.jsx)("a",{href:"/register?type=admin&email=".concat(s.ownerEmail),className:"inline-block bg-green-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-600/20",children:"Step 3: Create Admin Account →"})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center font-sans",children:(0,r.jsx)("div",{className:"text-red-500 font-medium bg-red-50 px-4 py-2 rounded-lg border border-red-100",children:"No domain specified"})})}},3224:(e,s,t)=>{Promise.resolve().then(t.bind(t,879))}},e=>{e.O(0,[441,255,358],()=>e(e.s=3224)),_N_E=e.O()}]);